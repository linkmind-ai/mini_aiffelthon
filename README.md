# '공공기관 기록물 관리'를 위한 RAG 프로젝트


## 프로젝트 개요

이 프로젝트는 **RAG(Retrieval-Augmented Generation)** 기술을 활용하여 공공기관에서 만들어지는 회의록, 사업자료, 보고서, 매뉴얼 등의 데이터를 기반으로 질문에 대한 정확하고 맥락적인 답변을 생성하는 시스템을 구현한 것입니다. 한국어 지원 임베딩 모델과 FAISS를 사용한 검색, 그리고 Gemini API를 통한 답변 생성을 결합했습니다. 주요 목표는 기록물 자료를 활용하여 관련된 질문에 대해 신뢰할 수 있는 답변을 제공하는 것입니다.

## 주요 기능

- **문서 청크화**: `SemanticChunker`를 활용해 의미 단위로 텍스트를 분할
- **정보 검색**: FAISS와 KoSBERT 모델을 사용해 질문과 유사한 문서 청크를 검색
- **텍스트 생성**: Gemini API를 통해 검색된 문맥을 요약한 답변 생성
- **평가**: RAGAS를 이용해 답변의 충실도(Faithfulness), 관련성(Relevancy), 문맥 정밀도(Precision), 재현율(Recall)을 평가
- **문서 통합**: 파편화된 문서들을 청크 유사도 기반으로 관련성이 높은 문서끼리 자동으로 연결/통합하여 새로운 문서 생성

## 데이터셋

- **출처**: https://url.kr/jzipim
- **내용**: 국가기록물 및 정부간행물을 활용한 초거대 AI 학습용 말뭉치 데이터셋 및 질의응답 데이터
- **데이터 정보**:
  - 국가기록원 데이터를 활용한 말뭉치
  - 원천데이터 304,340,415 토큰
  - 라벨링 데이터 의문사형 질의응답 30,000건
  - 라벨링 데이터 Yes/No 질의응답 20,000건

## 기술 스택

- **라이브러리**:
  - `sentence-transformers` (`jhgan/ko-sbert-sts`) - 한국어 임베딩 생성.
  - `faiss` - 효율적인 유사도 검색.
  - `google.generativeai` - Gemini API를 통한 답변 생성.
  - `langchain` - 텍스트 분할 및 워크플로우 관리.
  - `ragas` - RAG 시스템 평가.
  - `pandas`, `numpy`, `sklearn` - 데이터 처리 및 유사도 계산.
- **모델**: KoSBERT (`jhgan/ko-sbert-sts`), Gemini (`gemini-2.0-flash`).

## 성능 개선 실험

- **Chunker방식 비교**:
  - 'CharactertextSplitter' vs 'RecursiveCharacterTextSplitter' vs 'Semantic Chunker'
  - 'Semantic Chunker' 방식 채택
 
- **Retriever방식 비교**:
  - '단순 코사인 유사도 방식' vs '멀티벡터 리트리버'
  - '단순 코사인 유사도 방식' 채택

- **context 추출 기준 선정**:
  - 유사도가 높은 상위 3개 청크를 기반으로 정답 context 채택률 확보
  - LLM에게 정답이 포함된 청크를 전달하기 위한 방법론 탐색
  - 유사도 임계치 선정 방식에 따른 정답 청크 채택 결과 비교 
    - 최고 유사도 점수 기준 임계치를 0.1, 0.2, 0.3까지 값으로 설정
    - 최고 유사도 점수 기준 임계치를 10%, 20%, 30%까지 비율로 설정
  - 최고 유사도 점수 기준 30% 비율로 채택하여 적정 정답 청크 개수 확보

## 향후 계획

- **데이터 태깅 기능 추가**:
  - 문서/노트에 대한 주요 키워드 추출
  - 키워드 기반 태그 자동 생성
  - 태그와 함께 문서 메타데이터 저장
 
- **자동 백링크 기능 추가**:
  - 문서 간 유사도 분석을 통한 관계 파악
  - 기존문서에 '관련 문서 링크' 자동 생성

- **앱 배포**:
  - 사용자 친화적인 화면 구성
  - 검색 결과 하이라이트 기능
  - 검색어 추천 기능
  - 질의 기록 기반 재질문 기능 제공
  - Streamlit 기반 웹 UI 도입

- **MLops 적용**:
  - 문서 업로드 -> 자동 벡터 임베딩화 -> DB저장
  - FastApi + Docker 기반 api 서비스 구성
  - 주기적 데이터 업데이트
  - 재인덱싱 자동화
  - 실시간 쿼리 응답 배포 자동화
